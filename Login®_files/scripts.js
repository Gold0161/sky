var token="",tokenAvailable=!1,eamStatus="",issueTime=0,expiresIn=0;const allowOriginList=["http://localhost","http://localhost:4200","https://dvl1.delta.com","https://dvl2.delta.com","https://dvl3.delta.com","https://st.delta.com","https://s1.delta.com","https://s2.delta.com","https://s3.delta.com","https://si.delta.com","https://www.delta.com"],getDashBrdDataURL="/login/login/getDashBrdData";self.client&&self.client.matchAll()&&self.clients.matchAll().then(function(e){e.forEach(function(s){s.postMessage("The service worker just started up.")})}),self.addEventListener("install",()=>{self.skipWaiting()}),self.addEventListener("activate",function(e){e.waitUntil(self.clients.claim())}),self.addEventListener("message",function(e){switch(e.data.type){case"GET_TOKEN":e.ports[0].postMessage({error:null,tokenAvailable,issueTime,expiresIn});break;case"GET_STATUS":e.ports[0].postMessage({error:null,eamStatus});break;case"ADD_TOKEN":e.ports[0].postMessage({error:null,token:token=e.data.token,tokenAvailable:tokenAvailable=!0,issueTime:issueTime=e.data.issueTime,expiresIn:expiresIn=e.data.expiresIn});break;case"ADD_STATUS":e.ports[0].postMessage({error:null,eamStatus:eamStatus=e.data.eamStatus});break;case"DELETE_TOKEN":token="",tokenAvailable=!1,issueTime=0,expiresIn=0,e.ports[0].postMessage({error:null,token:"",tokenAvailable:!1,issueTime:0,expiresIn:0});break;case"DELETE_STATUS":eamStatus="",e.ports[0].postMessage({error:null,eamStatus:""})}"waitUntil"in e&&e.waitUntil(self.clients.claim())}),self.addEventListener("fetch",e=>{const s=new URL(e.request.url);if(allowOriginList.includes(s.origin)&&"/"!==s.pathname&&getDashBrdDataURL.includes(s.pathname)){const t=new Headers(e.request.headers);return t.append("x-loginsw","x-loginsw"),token&&!t.get("Authorization")&&t.append("Authorization","Bearer "+token),e.respondWith(fetch(e.request.url,{method:"POST",headers:t,body:JSON.stringify(Object.assign({}))}))}});